# Справочник команд SCPI для SDM4055A-SC

Документ содержит описание команд SCPI, используемых в проекте SDM4055A_Controller для управления мультиметром Siglent SDM4055A-SC.

## Содержание

1. [Команды идентификации](#команды-идентификации)
2. [Команды измерения (MEASure)](#команды-измерения-measure)
3. [Команды конфигурации (CONFigure)](#команды-конфигурации-configure)
4. [Команды маршрутизации (ROUTe)](#команды-маршрутизации-route)
5. [Команды триггера (TRIGger)](#команды-триггера-trigger)
6. [Команды выборки (SAMPle)](#команды-выборки-sample)
7. [Команды инициализации и получения данных](#команды-инициализации-и-получения-данных)
8. [Команды сброса](#команды-сброса)
9. [Команды данных (DATA)](#команды-данных-data)
10. [Команды системы (SYSTem)](#команды-системы-system)

---

## Команды идентификации

### `*IDN?`
Запрашивает идентификационную информацию об устройстве.

**Синтаксис:** `*IDN?`

**Тип ответа:** Строка

**Пример ответа:** `SIGLENT,SDM4055A-SC,DS1234567890,1.00`

**Описание:** Возвращает информацию в формате: `производитель,модель,серийный_номер,версия`

---

## Команды измерения (MEASure)

Команды MEASure выполняют измерение с использованием параметров по умолчанию и немедленно возвращают результат.

### `MEAS:VOLT:DC? [{<range>|AUTO|MIN|MAX|DEF}]`
Измеряет постоянное напряжение.

**Синтаксис:** `MEAS:VOLT:DC? [{<range>|AUTO|MIN|MAX|DEF}]`

**Параметры диапазона (SDM3055/SDM3065X):**
- `200 mV`, `2 V`, `20 V`, `200 V`, `1000 V` (DC) / `750 V` (AC)
- `AUTO` - автоматический выбор диапазона (по умолчанию)

**Пример ответа:** `+4.23450000E-03`

**Использование в проекте:** [`hardware/visa_interface.py:145`](hardware/visa_interface.py:145)

---

### `MEAS:VOLT:AC? [{<range>|AUTO|MIN|MAX|DEF}]`
Измеряет переменное напряжение.

**Синтаксис:** `MEAS:VOLT:AC? [{<range>|AUTO|MIN|MAX|DEF}]`

**Параметры диапазона:** те же, что для DC

**Пример ответа:** `+2.43186951E-02`

---

### `MEAS:CURR:DC? [{<range>|AUTO|MIN|MAX|DEF}]`
Измеряет постоянный ток.

**Синтаксис:** `MEAS:CURR:DC? [{<range>|AUTO|MIN|MAX|DEF}]`

**Параметры диапазона (SDM3055/SDM3065X):**
- `200 uA`, `2 mA`, `20 mA`, `200 mA`, `2 A`, `10 A`, `AUTO`
- `AUTO` - автоматический выбор диапазона (по умолчанию)

**Пример ответа:** `+4.32133675E-04`

---

### `MEAS:CURR:AC? [{<range>|AUTO|MIN|MAX|DEF}]`
Измеряет переменный ток.

**Синтаксис:** `MEAS:CURR:AC? [{<range>|AUTO|MIN|MAX|DEF}]`

**Параметры диапазона:** те же, что для DC (минимальный диапазон `20 mA` для AC)

---

### `MEAS:RES? [{<range>|AUTO|MIN|MAX|DEF}]`
Измеряет сопротивление (2-проводное).

**Синтаксис:** `MEAS:RES? [{<range>|AUTO|MIN|MAX|DEF}]`

**Параметры диапазона (SDM3055/SDM3065X):**
- `200 Ω`, `2 kΩ`, `20 kΩ`, `200 kΩ`, `2 MΩ`, `10 MΩ`, `100 MΩ`, `AUTO`

**Пример ответа:** `+3.27150000E+02`

---

### `MEAS:FRES? [{<range>|AUTO|MIN|MAX|DEF}]`
Измеряет сопротивление (4-проводное).

**Синтаксис:** `MEAS:FRES? [{<range>|AUTO|MIN|MAX|DEF}]`

**Параметры диапазона:** те же, что для 2-проводного сопротивления

**Пример ответа:** `+6.71881065E+01`

---

### `MEAS:CAP? [{<range>|AUTO|MIN|MAX|DEF}]`
Измеряет ёмкость.

**Синтаксис:** `MEAS:CAP? [{<range>|AUTO|MIN|MAX|DEF}]`

**Параметры диапазона (SDM3055/SDM3065X):**
- `2 nF`, `20 nF`, `200 nF`, `2 uF`, `20 uF`, `200 uF`, `2 mF`, `20 mF`, `100 mF`, `AUTO`

**Пример ответа:** `+7.26141264E-10`

---

### `MEAS:FREQ?`
Измеряет частоту.

**Синтаксис:** `MEAS:FREQ?`

**Пример ответа:** `+7.19480528E+01`

---

### `MEAS:PER?`
Измеряет период.

**Синтаксис:** `MEAS:PER?`

---

### `MEAS:TEMP? [{RTD|THER|DEFault}[,{<type>|DEFault}]]`
Измеряет температуру.

**Синтаксис:** `MEAS:TEMP? [{RTD|THER|DEFault}[,{<type>|DEFault}]]`

**Параметры:**
- `RTD` - терморезистор (PT100, PT1000)
- `THER` - термопара (B, E, J, K, N, R, S, T типы)

**Пример ответа:** `-2.00000000E+02`

---

### `MEAS:DIOD?`
Тест диода.

**Синтаксис:** `MEAS:DIOD?`

**Пример ответа:** `+9.84733701E-01`

**Примечание:** При разомкнутой цепи возвращает `+9.90000000E+37`

---

### `MEAS:CONT?`
Тест непрерывности.

**Синтаксис:** `MEAS:CONT?`

**Пример ответа:** `+9.84739065E+02`

**Примечание:** Диапазон фиксирован - 2 kΩ

---

## Команды конфигурации (CONFigure)

Команды CONFigure настраивают параметры измерения, но не запускают измерение автоматически. Для запуска используйте `INIT` или `READ?`.

### `CONF:VOLT:DC [{<range>|AUTO|MIN|MAX|DEF}]`
Настраивает измерение постоянного напряжения.

**Синтаксис:** `CONF:VOLT:DC [{<range>|AUTO|MIN|MAX|DEF}]`

**Параметры диапазона:** те же, что для `MEAS:VOLT:DC?`

**Использование в проекте:** [`hardware/visa_interface.py:173`](hardware/visa_interface.py:173)

---

### `CONF:VOLT:AC [{<range>|AUTO|MIN|MAX|DEF}]`
Настраивает измерение переменного напряжения.

**Синтаксис:** `CONF:VOLT:AC [{<range>|AUTO|MIN|MAX|DEF}]`

---

### `CONF:CURR:DC [{<range>|AUTO|MIN|MAX|DEF}]`
Настраивает измерение постоянного тока.

**Синтаксис:** `CONF:CURR:DC [{<range>|AUTO|MIN|MAX|DEF}]`

---

### `CONF:CURR:AC [{<range>|AUTO|MIN|MAX|DEF}]`
Настраивает измерение переменного тока.

**Синтаксис:** `CONF:CURR:AC [{<range>|AUTO|MIN|MAX|DEF}]`

---

### `CONF:RES [{<range>|AUTO|MIN|MAX|DEF}]`
Настраивает измерение сопротивления (2-проводное).

**Синтаксис:** `CONF:RES [{<range>|AUTO|MIN|MAX|DEF}]`

---

### `CONF:FRES [{<range>|AUTO|MIN|MAX|DEF}]`
Настраивает измерение сопротивления (4-проводное).

**Синтаксис:** `CONF:FRES [{<range>|AUTO|MIN|MAX|DEF}]`

---

### `CONF:CAP [{<range>|AUTO|MIN|MAX|DEF}]`
Настраивает измерение ёмкости.

**Синтаксис:** `CONF:CAP [{<range>|AUTO|MIN|MAX|DEF}]`

---

### `CONF:FREQ`
Настраивает измерение частоты.

**Синтаксис:** `CONF:FREQ`

---

### `CONF:PER`
Настраивает измерение периода.

**Синтаксис:** `CONF:PER`

---

### `CONF:TEMP [{RTD|THER|DEFault}[,{<type>|DEFault}]]`
Настраивает измерение температуры.

**Синтаксис:** `CONF:TEMP [{RTD|THER|DEFault}[,{<type>|DEFault}]]`

---

### `CONF:DIOD`
Настраивает тест диода.

**Синтаксис:** `CONF:DIOD`

---

### `CONF:CONT`
Настраивает тест непрерывности.

**Синтаксис:** `CONF:CONT`

---

### `CONF?`
Запрашивает текущую конфигурацию.

**Синтаксис:** `CONF?`

**Пример ответа (SDM3065X):** `"VOLT +2.00000000E-01,+1.00000000E-07"`

**Пример ответа (SDM3055):** `"VOLT +2.00000000E-01"`

---

## Команды маршрутизации (ROUTe)

Команды ROUTe используются для управления сканирующим модулем CS1016 (только для SC моделей).

### `ROUT:SCAN {ON|1|OFF|0}`
Включает или выключает режим сканирования.

**Синтаксис:** `ROUT:SCAN {ON|1|OFF|0}`

**Параметры:**
- `ON` или `1` - включить режим сканирования
- `OFF` или `0` - выключить режим сканирования

**Использование в проекте:** [`hardware/visa_interface.py:252`](hardware/visa_interface.py:252)

---

### `ROUT:FUNC {SCAN|STEP}`
Устанавливает функцию маршрутизации.

**Синтаксис:** `ROUT:FUNC {SCAN|STEP}`

**Параметры:**
- `SCAN` - режим непрерывного сканирования
- `STEP` - пошаговый режим

**Использование в проекте:** [`hardware/visa_interface.py:257`](hardware/visa_interface.py:257)

---

### `ROUT:CHAN <ch>,ON,<type>,AUTO,FAST`
Настраивает канал для сканирования.

**Синтаксис:** `ROUT:CHAN <ch>,ON,<type>,AUTO,FAST`

**Параметры:**
- `<ch>` - номер канала (1-16)
- `ON` - включить канал
- `<type>` - тип измерения: `DCV`, `ACV`, `DCA`, `ACA`, `RES`, `CAP`, `FREQ`, `DIOD`, `CONT`, `RTD`, `THER`
- `AUTO` - автоматический выбор диапазона
- `FAST` - быстрый режим

**Использование в проекте:** [`hardware/visa_interface.py:318`](hardware/visa_interface.py:318)

**Пример:** `ROUT:CHAN 1,ON,DCV,AUTO,FAST`

---

### `ROUT:LIMI:HIGH {<value>|MAX|MIN|DEF}`
Устанавливает верхний предел сканирования.

**Синтаксис:** `ROUT:LIMI:HIGH {<value>|MAX|MIN|DEF}`

**Параметры:**
- `<value>` - номер верхнего канала (1-16)
- `MAX` - максимальное значение (16)
- `MIN` - минимальное значение (1)
- `DEF` - значение по умолчанию (16)

**Использование в проекте:** [`hardware/visa_interface.py:368`](hardware/visa_interface.py:368)

---

### `ROUT:LIMI:LOW {<value>|MAX|MIN|DEF}`
Устанавливает нижний предел сканирования.

**Синтаксис:** `ROUT:LIMI:LOW {<value>|MAX|MIN|DEF}`

**Параметры:**
- `<value>` - номер нижнего канала (1-16)
- `MAX` - максимальное значение (16)
- `MIN` - минимальное значение (1)
- `DEF` - значение по умолчанию (1)

**Использование в проекте:** [`hardware/visa_interface.py:372`](hardware/visa_interface.py:372)

---

### `ROUT:COUN {<value>|MAX|MIN|DEF}`
Устанавливает количество сканирований.

**Синтаксис:** `ROUT:COUN {<value>|MAX|MIN|DEF}`

**Параметры:**
- `<value>` - количество сканирований
- `MAX` - максимальное значение
- `MIN` - минимальное значение (1)
- `DEF` - значение по умолчанию (1)

**Использование в проекте:** [`hardware/visa_interface.py:398`](hardware/visa_interface.py:398)

---

### `ROUT:COUN:AUTO {ON|1|OFF|0}`
Включает или выключает автоматический подсчет количества сканирований.

**Синтаксис:** `ROUT:COUN:AUTO {ON|1|OFF|0}`

---

### `ROUT:START {ON|1|OFF|0}`
Запускает или останавливает сканирование.

**Синтаксис:** `ROUT:START {ON|1|OFF|0}`

**Параметры:**
- `ON` или `1` - запустить сканирование
- `OFF` или `0` - остановить сканирование

**Использование в проекте:** [`hardware/visa_interface.py:403`](hardware/visa_interface.py:403)

---

### `ROUT:START?`
Запрашивает статус сканирования.

**Синтаксис:** `ROUT:START?`

**Ответ:** `ON` (сканирование выполняется) или `OFF` (сканирование завершено)

**Использование в проекте:** [`hardware/visa_interface.py:428`](hardware/visa_interface.py:428)

---

### `ROUT:DATA? <value>`
Получает данные сканирования для указанного канала.

**Синтаксис:** `ROUT:DATA? <value>`

**Параметры:**
- `<value>` - номер канала (1-16)

**Пример ответа:** `-4.24124300E-04 VDC`

**Использование в проекте:** [`hardware/visa_interface.py:457`](hardware/visa_interface.py:457)

---

### `ROUT:DELay {<value>|MAX|MIN|DEF}`
Устанавливает задержку между каналами при сканировании.

**Синтаксис:** `ROUT:DELay {<value>|MAX|MIN|DEF}`

---

### `ROUT:STATe?`
Запрашивает статус маршрутизации.

**Синтаксис:** `ROUT:STATe?`

---

## Команды триггера (TRIGger)

### `TRIG:COUN {<count>|MIN|MAX|DEF|INFinity}`
Устанавливает количество триггеров.

**Синтаксис:** `TRIG:COUN {<count>|MIN|MAX|DEF|INFinity}`

**Параметры:**
- `<count>` - количество триггеров
- `MIN` - минимальное значение (1)
- `MAX` - максимальное значение
- `DEF` - значение по умолчанию (1)
- `INFinity` - бесконечное количество триггеров

---

### `TRIG:DELay {<seconds>|MIN|MAX|DEF}`
Устанавливает задержку триггера.

**Синтаксис:** `TRIG:DELay {<seconds>|MIN|MAX|DEF}`

**Параметры:**
- `<seconds>` - задержка в секундах
- `MIN` - минимальное значение
- `MAX` - максимальное значение
- `DEF` - значение по умолчанию (автоматическая задержка)

---

### `TRIG:DELay:AUTO {ON|1|OFF|0}`
Включает или выключает автоматическую задержку триггера.

**Синтаксис:** `TRIG:DELay:AUTO {ON|1|OFF|0}`

---

### `TRIG:SLOPe {POSitive|NEGative}`
Устанавливает фронт триггера.

**Синтаксис:** `TRIG:SLOPe {POSitive|NEGative}`

**Параметры:**
- `POSitive` - положительный фронт (нарастающий)
- `NEGative` - отрицательный фронт (спадающий)

---

### `TRIG:SOURce {IMMediate|EXTernal|BUS}`
Устанавливает источник триггера.

**Синтаксис:** `TRIG:SOURce {IMMediate|EXTernal|BUS}`

**Параметры:**
- `IMMediate` - внутренний триггер (по умолчанию)
- `EXTernal` - внешний триггер (разъем на задней панели)
- `BUS` - триггер по шине

---

## Команды выборки (SAMPle)

### `SAMP:COUN {<count>|MIN|MAX|DEF}`
Устанавливает количество выборок на триггер.

**Синтаксис:** `SAMP:COUN {<count>|MIN|MAX|DEF}`

**Параметры:**
- `<count>` - количество выборок
- `MIN` - минимальное значение (1)
- `MAX` - максимальное значение
- `DEF` - значение по умолчанию (1)

---

## Команды инициализации и получения данных

### `INIT`
Инициализирует измерение. Переводит прибор в режим ожидания триггера и выполняет измерение.

**Синтаксис:** `INIT`

**Описание:** Команда не возвращает данные. Для получения данных используйте `FETCh?`.

---

### `FETCh?`
Получает данные из памяти чтения.

**Синтаксис:** `FETCh?`

**Пример ответа:** `-5.21205366E-04`

**Описание:** Команда ожидает завершения всех измерений перед возвратом данных.

---

### `READ?`
Выполняет измерение и возвращает результат.

**Синтаксис:** `READ?`

**Пример ответа:** `-5.21391630E-04`

**Описание:** Эквивалентно последовательности команд `INIT` + `FETCh?`.

---

### `ABOR`
Прерывает текущую операцию.

**Синтаксис:** `ABOR`

---

## Команды сброса

### `*RST`
Сбрасывает прибор к заводским настройкам.

**Синтаксис:** `*RST`

**Описание:** Сбрасывает все параметры измерения к значениям по умолчанию.

---

### `*CLS`
Очищает очередь ошибок.

**Синтаксис:** `*CLS`

---

## Команды данных (DATA)

### `DATA:LAST?`
Возвращает последнее измерение.

**Синтаксис:** `DATA:LAST?`

**Пример ответа:** `-4.79221344E-04 VDC`

**Описание:** Если данных нет, возвращает `9.91E37` (Not a Number).

---

### `DATA:POINts?`
Возвращает общее количество измерений в памяти чтения.

**Синтаксис:** `DATA:POINts?`

**Пример ответа:** `+20`

**Описание:** Можно сохранить до 10000 измерений в памяти.

---

### `DATA:REMove? <num_readings>`
Читает и удаляет указанное количество измерений из памяти чтения.

**Синтаксис:** `DATA:REMove? <num_readings>`

**Параметры:**
- `<num_readings>` - количество измерений для чтения (1-10000)

**Пример ответа:** `-4.55379486E-04,-4.55975533E-04,-4.56273556E-04,-4.53591347E-04,-4.55379486E-04`

---

## Команды системы (SYSTem)

### `SYST:ERR?`
Запрашивает информацию об ошибке.

**Синтаксис:** `SYST:ERR?`

**Пример ответа:** `0,"No error"`

---

## Типы измерений в проекте

В проекте используются следующие типы измерений (определены в [`hardware/visa_interface.py:15-28`](hardware/visa_interface.py:15-28)):

| Тип измерения | SCPI команда | Описание |
|--------------|--------------|-----------|
| VOLTAGE_DC | `VOLT:DC` | Постоянное напряжение |
| VOLTAGE_AC | `VOLT:AC` | Переменное напряжение |
| CURRENT_DC | `CURR:DC` | Постоянный ток |
| CURRENT_AC | `CURR:AC` | Переменный ток |
| RESISTANCE_2WIRE | `RES` | Сопротивление (2 провода) |
| RESISTANCE_4WIRE | `FRES` | Сопротивление (4 провода) |
| CAPACITANCE | `CAP` | Ёмкость |
| FREQUENCY | `FREQ` | Частота |
| DIODE | `DIOD` | Тест диода |
| CONTINUITY | `CONT` | Тест непрерывности |
| TEMP_RTD | `TEMP:RTD` | Температура (RTD) |
| TEMP_THERMOCOUPLE | `TEMP:THER` | Температура (термопара) |

---

## Примеры использования в проекте

### Подключение к устройству
```python
# hardware/visa_interface.py:95
idn = self.instrument.query("*IDN?")
```

### Чтение измерения
```python
# hardware/visa_interface.py:145
value_str = self.instrument.query(":MEAS:VOLT:DC?")
```

### Настройка функции измерения
```python
# hardware/visa_interface.py:173
self.instrument.write(f":CONF:{function}")
```

### Включение режима сканирования
```python
# hardware/visa_interface.py:252
self.instrument.write(":ROUT:SCAN ON")
```

### Настройка канала сканирования
```python
# hardware/visa_interface.py:318
cmd = f":ROUT:CHAN {channel_num},ON,{channel_type},AUTO,FAST"
self.instrument.write(cmd)
```

### Получение данных с канала
```python
# hardware/visa_interface.py:457
response = self.instrument.query(f":ROUT:DATA? {channel_num}")
```

---

## Полезные примечания

1. **Значение перегрузки:** При превышении диапазона прибор возвращает `+9.90000000E+37` или `9.9E37`.

2. **Автоматический диапазон:** Параметр `AUTO` позволяет прибору автоматически выбирать подходящий диапазон.

3. **Каналы 1-12:** Поддерживают все типы измерений кроме тока.

4. **Каналы 13-16:** Поддерживают только измерения тока (DC и AC).

5. **Таймауты:** Рекомендуется использовать таймаут 2 секунды для VISA-команд (см. [`hardware/visa_interface.py:92`](hardware/visa_interface.py:92)).

6. **Задержки:** При настройке каналов и переключении функций рекомендуется использовать задержки 50-200 мс для стабилизации.

---

## Дополнительные ресурсы

- Официальная документация Siglent: https://int.siglent.com/products-document/sdm4055a/
- Руководство по программированию: `doc/SDM-Series-Digital-Multimeter_ProgrammingGuide_EN02A.pdf`
- SCPI стандарт: https://www.ivifoundation.org/
